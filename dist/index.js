!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).inkunits={})}(this,(function(n){"use strict";function t(n,t){if(n.length!=t.length)return!1;for(const r of n)if(!t.includes(r))return!1;return!0}function r(n,t){return n.concat(t)}function o(n,t={}){const o=function(n,t){const{multiplierSeparator:r,dividerSeparator:o}=t,a=r||"*",s=o||"/",[i,f=""]=n.split(s);return{numerator:e(i.split(a)),denominator:e(f.split(a))}}(n.replace(/\s/g,""),t),s=a(o.numerator),i=a(o.denominator);return{numerator:s.reduce(r,[]),denominator:i.reduce(r,[])}}function e(n){return n.filter((n=>n.length>0))}function a(n){return t=u,[].concat(...n.map(t));var t}const s=/[\w]+[\d]*/,i=/[A-Za-z]+/,f=/[0-9]+/;function u(n){if(!s.test(n))throw new Error("Could not parse unit from "+n);return Array(function(n){return n.match(f)?parseInt(n.match(f)[0]):1}(n)).fill(function(n){return n.match(i)[0]}(n))}var c={systems:[{name:"universal",factors:{ms:.001,s:1,min:60,h:3600,day:86400,week:604800,month:2592e3,year:31556952}}]},m={systems:[{name:"international",factors:{mm:.001,cm:.01,dm:.1,m:1,dam:10,hm:100,km:1e3}},{name:"us",factors:{mi:5280,ft:1,in:.08333}}],system_conversion_factors:[{from:"international",to:"us",factor:3.2808},{from:"us",to:"international",factor:.3048}]},l={systems:[{name:"universal",factors:{rad:1,deg:.017453292519943}}]},d={systems:[{name:"international",factors:{mg:.001,cg:.01,dg:.1,g:1,dag:10,hg:100,kg:1e3}},{name:"us",factors:{oz:1,lb:16}}],system_conversion_factors:[{from:"international",to:"us",factor:.03527396},{from:"us",to:"international",factor:28.349523125}]},p={systems:[{name:"international",factors:{N:1,kN:1e3,MN:1e6,GN:1e9}},{name:"us",factors:{lbf:1}}],system_conversion_factors:[{from:"international",to:"us",factor:.224808943871},{from:"us",to:"international",factor:4.4482216}]},g={time:c,length:m,angle:l,mass:d,force:p},h=Object.freeze({__proto__:null,time:c,length:m,angle:l,mass:d,force:p,default:g});function y(n,t){return n.reduce(((n,t)=>n*t.factor),1)/t.reduce(((n,t)=>n*t.factor),1)}function v(n,t){let r=1;for(const o of function(n,t){if(n.length!=t.length)throw new Error("Arrays should have equal lengths");const r=[];for(var o=0;o<n.length;o++)r.push([n[o],t[o]]);return r}(n,t))if(o[0].system!=o[1].system){r*=h[o[0].group].system_conversion_factors.find((n=>n.from==o[0].system&&n.to==o[1].system)).factor}return r}const _={};function w(n,r,e){const a=function(n,t){return`${n}->${t}`}(r,e);if(_.hasOwnProperty(a))return n*_[a];const s=b(o(r)),i=b(o(e));if(!function(n,r){const o=n.numerator.map((n=>n.group)),e=n.denominator.map((n=>n.group)),a=r.numerator.map((n=>n.group)),s=r.denominator.map((n=>n.group));return t(o,a)&&t(e,s)}(s,i))throw new Error(`Cannot convert from ${r} to ${e}`);return _[a]=function(n,t){const r=y(n.numerator,t.numerator),o=y(n.denominator,t.denominator);return r*v(n.numerator,t.numerator)/(o*v(n.denominator,t.denominator))}(s,i),w(n,r,e)}function b(n){return{numerator:n.numerator.map(k),denominator:n.denominator.map(k)}}function k(n){for(const t in h)for(const r of h[t].systems)if(r.factors.hasOwnProperty(n))return{group:t,system:r.name,factor:r.factors[n]};throw new Error(`Unit named ${n} was not found in configuration`)}n.convert=function(n){return{from:t=>({to:r=>w(n,t,r)})}},Object.defineProperty(n,"__esModule",{value:!0})}));
